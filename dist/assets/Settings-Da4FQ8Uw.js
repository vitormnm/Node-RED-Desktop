import{h as w,g as x,p as S,c as U,r as d,o as C,w as o,a as t,b as n,d as v,m as i}from"./index-DTvI6pW8.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={__name:"Settings",setup(J){const l=w({app:{name:null,version:null,startupProjectWindow:{enabled:null,fullscreen:!1,id:null,url:null},description:null},redundancy:{enabled:!1,type:null,ip:null,port:null}}),y=x([]),a=w({project:[],url:[],ip:[],port:[]});S(async()=>{const s=await window.api.get("/checkSettings");j(s),V(s)});function V(s){Object.assign(l,s)}function j(s){y.value=s.projects.map(e=>({name:e.name,id:e.id}))}function P(){Object.values(a).forEach(p=>p.length=0);let s=!0;l.app.startupProjectWindow.id||(a.project.push("Selecione um projeto."),s=!1),l.app.startupProjectWindow.url?.trim()||(a.url.push("URL não pode estar vazia."),s=!1);const e=/^(?:\d{1,3}\.){3}\d{1,3}$/;return l.redundancy.enabled&&!e.test(l.redundancy.ip)&&(a.ip.push("IP inválido."),s=!1),l.redundancy.enabled&&(!l.redundancy.port||l.redundancy.port<=0)&&(a.port.push("Porta inválida."),s=!1),s||i.error("Existem erros no settingsJsonulário"),s}async function _(){if(!P())return;const s=JSON.parse(JSON.stringify(l));(await window.api.post("/ctl_serverConfig_settings_save",s)).status==!0?i.success("Configurações salvas"):i.error("Erro ao salvar")}async function g(s){s=="install"&&((await window.api.post("/ctl_serverConfig_service")).status==!0?i.success("Service create"):i.error("Error service create")),s=="delete"&&((await window.api.delete("/ctl_serverConfig_service")).status==!0?i.success("Service deleted"):i.error("Error service deleted"))}return(s,e)=>{const p=d("v-checkbox"),u=d("v-row"),b=d("v-select"),m=d("v-text-field"),f=d("v-btn"),c=d("v-col"),k=d("v-card"),W=d("v-container");return C(),U(W,{class:"page",fluid:""},{default:o(()=>[t(u,{justify:"center"},{default:o(()=>[t(c,{cols:"12",sm:"8",md:"5"},{default:o(()=>[t(k,{class:"settings-card pa-6",elevation:"2"},{default:o(()=>[e[13]||(e[13]=n("h2",{class:"heading"},"project start window",-1)),t(u,{class:"mt-4",align:"center"},{default:o(()=>[t(p,{modelValue:l.app.startupProjectWindow.enabled,"onUpdate:modelValue":e[0]||(e[0]=r=>l.app.startupProjectWindow.enabled=r),density:"compact",label:"enabled"},null,8,["modelValue"])]),_:1}),t(u,{align:"center"},{default:o(()=>[t(p,{modelValue:l.app.startupProjectWindow.fullscreen,"onUpdate:modelValue":e[1]||(e[1]=r=>l.app.startupProjectWindow.fullscreen=r),density:"compact",label:"full screen"},null,8,["modelValue"])]),_:1}),e[14]||(e[14]=n("div",{class:"field-label"},"Select Project",-1)),t(b,{class:"mb-4",items:y.value,"item-title":"name","item-value":"id",modelValue:l.app.startupProjectWindow.id,"onUpdate:modelValue":e[2]||(e[2]=r=>l.app.startupProjectWindow.id=r),density:"comfortable","hide-details":"",error:a.project.length>0,"error-messages":a.project},null,8,["items","modelValue","error","error-messages"]),e[15]||(e[15]=n("div",{class:"field-label"},"initial url",-1)),t(m,{modelValue:l.app.startupProjectWindow.url,"onUpdate:modelValue":e[3]||(e[3]=r=>l.app.startupProjectWindow.url=r),"hide-details":"",class:"mb-6",error:a.url.length>0,"error-messages":a.url},null,8,["modelValue","error","error-messages"]),e[16]||(e[16]=n("h3",{class:"subheading"},"Redudancy",-1)),t(u,{class:"mb-2",align:"center"},{default:o(()=>[t(p,{modelValue:l.redundancy.enabled,"onUpdate:modelValue":e[4]||(e[4]=r=>l.redundancy.enabled=r),label:"Enabled redudancy"},null,8,["modelValue"])]),_:1}),e[17]||(e[17]=n("div",{class:"muted small"},"Application-level redundancy",-1)),t(b,{class:"mb-4 mt-2",items:["primary","secondary"],modelValue:l.redundancy.type,"onUpdate:modelValue":e[5]||(e[5]=r=>l.redundancy.type=r),density:"comfortable","hide-details":""},null,8,["modelValue"]),e[18]||(e[18]=n("div",{class:"field-label"},"IP server",-1)),t(m,{modelValue:l.redundancy.ip,"onUpdate:modelValue":e[6]||(e[6]=r=>l.redundancy.ip=r),"hide-details":"",class:"mb-1",error:a.ip.length>0,"error-messages":a.ip},null,8,["modelValue","error","error-messages"]),e[19]||(e[19]=n("div",{class:"muted small mb-4"},"Primary→secondary IP. secondary→primary IP.",-1)),e[20]||(e[20]=n("div",{class:"field-label"},"PORT UDP",-1)),t(m,{type:"number",modelValue:l.redundancy.port,"onUpdate:modelValue":e[7]||(e[7]=r=>l.redundancy.port=r),"hide-details":"",class:"mb-6",error:a.port.length>0,"error-messages":a.port},null,8,["modelValue","error","error-messages"]),t(u,null,{default:o(()=>[t(c,{cols:"auto"},{default:o(()=>[t(f,{size:"small",block:"",color:"grey",onClick:_},{default:o(()=>[...e[10]||(e[10]=[v("Save",-1)])]),_:1})]),_:1})]),_:1}),e[21]||(e[21]=n("h3",{class:"subheading mt-8"},"Windows service",-1)),t(u,{class:"mt-3",gap:"3"},{default:o(()=>[t(c,{cols:"auto"},{default:o(()=>[t(f,{size:"small",block:"",color:"grey",onClick:e[8]||(e[8]=r=>g("install"))},{default:o(()=>[...e[11]||(e[11]=[v(" Install service ",-1)])]),_:1})]),_:1}),t(c,{cols:"auto"},{default:o(()=>[t(f,{size:"small",block:"",color:"grey",onClick:e[9]||(e[9]=r=>g("delete"))},{default:o(()=>[...e[12]||(e[12]=[v(" Delete service ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},z=E(I,[["__scopeId","data-v-9c570e17"]]);export{z as default};
