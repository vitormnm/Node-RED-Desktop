import{r as c,e as U,o as y,f as R,a as t,F as _,w as a,d as u,c as D,g as S,b as O,t as P,n as pe,h as ve,i as ye,j as H,k as ie,l as ge,m as ue,p as Pe,u as Ve}from"./index-DTvI6pW8.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Te={class:"dialog-content"},xe={__name:"ProjectDialogSettings",props:{local:{type:Object,required:!0},errors:{type:Object,required:!0},submitType:{type:String,required:!0},submitLabel:{type:String,required:!0}},emits:["open-action","confirm-delete"],setup(o,{emit:C}){const d=C;return(x,l)=>{const v=c("v-btn"),k=c("v-col"),T=c("v-row"),f=c("v-text-field"),j=c("v-checkbox"),V=c("v-form");return y(),U("section",Te,[o.submitType==="update"?(y(),U(_,{key:0},[t(T,{class:"mt-4"},{default:a(()=>[t(k,{cols:"4"},{default:a(()=>[t(v,{size:"small",block:"",color:"grey",onClick:l[0]||(l[0]=r=>d("open-action","open_editor"))},{default:a(()=>[...l[23]||(l[23]=[u("Editor local",-1)])]),_:1})]),_:1}),t(k,{cols:"4"},{default:a(()=>[t(v,{size:"small",block:"",color:"grey",onClick:l[1]||(l[1]=r=>d("open-action","open_editor_web"))},{default:a(()=>[...l[24]||(l[24]=[u("Editor web",-1)])]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(k,{cols:"4"},{default:a(()=>[t(v,{size:"small",block:"",color:"grey",onClick:l[2]||(l[2]=r=>d("open-action","open_dashboard"))},{default:a(()=>[...l[25]||(l[25]=[u("Dashboard local",-1)])]),_:1})]),_:1}),t(k,{cols:"4"},{default:a(()=>[t(v,{size:"small",block:"",color:"grey",onClick:l[3]||(l[3]=r=>d("open-action","open_dashboard_web"))},{default:a(()=>[...l[26]||(l[26]=[u("Dashboard web",-1)])]),_:1})]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(k,{cols:"4"},{default:a(()=>[t(v,{size:"small",block:"",color:"grey",onClick:l[4]||(l[4]=r=>d("open-action","open_folder"))},{default:a(()=>[...l[27]||(l[27]=[u("folder window",-1)])]),_:1})]),_:1}),t(k,{cols:"4"},{default:a(()=>[o.submitLabel==="Update"?(y(),D(v,{key:0,size:"small",block:"",color:"red",onClick:l[5]||(l[5]=r=>d("confirm-delete"))},{default:a(()=>[...l[28]||(l[28]=[u("Delete Project",-1)])]),_:1})):R("",!0)]),_:1})]),_:1})],64)):R("",!0),t(V,{class:"mt-4","lazy-validation":""},{default:a(()=>[t(f,{label:"Name",modelValue:o.local.name,"onUpdate:modelValue":l[6]||(l[6]=r=>o.local.name=r),readonly:o.submitType==="update","error-messages":o.errors.name},null,8,["modelValue","readonly","error-messages"]),t(f,{label:"Port",type:"number",modelValue:o.local.uiPort,"onUpdate:modelValue":l[7]||(l[7]=r=>o.local.uiPort=r),"error-messages":o.errors.uiPort},null,8,["modelValue","error-messages"]),t(T,null,{default:a(()=>[t(k,{cols:"12"},{default:a(()=>[t(j,{modelValue:o.local.autoStart,"onUpdate:modelValue":l[8]||(l[8]=r=>o.local.autoStart=r),label:"Auto start"},null,8,["modelValue"]),t(j,{modelValue:o.local.settings.https.enabled,"onUpdate:modelValue":l[9]||(l[9]=r=>o.local.settings.https.enabled=r),label:"Enabled HTTPS"},null,8,["modelValue"]),t(j,{modelValue:o.local.settings.editorTheme.projects.enabled,"onUpdate:modelValue":l[10]||(l[10]=r=>o.local.settings.editorTheme.projects.enabled=r),label:"Enabled project (required git)"},null,8,["modelValue"]),t(j,{modelValue:o.local.adminAuth,"onUpdate:modelValue":l[11]||(l[11]=r=>o.local.adminAuth=r),label:"Enabled security"},null,8,["modelValue"])]),_:1})]),_:1}),o.local.adminAuth?(y(),U(_,{key:0},[t(f,{label:"User",type:"text",modelValue:o.local.settings.adminAuth.users[0].username,"onUpdate:modelValue":l[12]||(l[12]=r=>o.local.settings.adminAuth.users[0].username=r),"error-messages":o.errors.user},null,8,["modelValue","error-messages"]),t(f,{label:"Password",type:"password",modelValue:o.local.settings.adminAuth.users[0].password,"onUpdate:modelValue":l[13]||(l[13]=r=>o.local.settings.adminAuth.users[0].password=r),"error-messages":o.errors.password},null,8,["modelValue","error-messages"])],64)):R("",!0),t(f,{label:"http Admin Root",modelValue:o.local.settings.httpAdminRoot,"onUpdate:modelValue":l[14]||(l[14]=r=>o.local.settings.httpAdminRoot=r),"error-messages":o.errors.httpAdminRoot},null,8,["modelValue","error-messages"]),t(f,{label:"http Node Root",modelValue:o.local.settings.httpNodeRoot,"onUpdate:modelValue":l[15]||(l[15]=r=>o.local.settings.httpNodeRoot=r),"error-messages":o.errors.httpNodeRoot},null,8,["modelValue","error-messages"]),t(f,{label:"Flow file name",modelValue:o.local.settings.flowFile,"onUpdate:modelValue":l[16]||(l[16]=r=>o.local.settings.flowFile=r),"error-messages":o.errors.flowFile},null,8,["modelValue","error-messages"]),t(f,{label:"Folder static files",modelValue:o.local.settings.StaticFolder,"onUpdate:modelValue":l[17]||(l[17]=r=>o.local.settings.StaticFolder=r),"error-messages":o.errors.StaticFolder},null,8,["modelValue","error-messages"]),t(f,{label:"Admin title",modelValue:o.local.settings.editorTheme.page.title,"onUpdate:modelValue":l[18]||(l[18]=r=>o.local.settings.editorTheme.page.title=r),"error-messages":o.errors.adminTitle},null,8,["modelValue","error-messages"]),t(f,{label:"Url admin Node-RED",modelValue:o.local.UrlAdmin,"onUpdate:modelValue":l[19]||(l[19]=r=>o.local.UrlAdmin=r),"error-messages":o.errors.UrlAdmin},null,8,["modelValue","error-messages"]),t(f,{label:"Url Dashboard Node-RED",modelValue:o.local.UrlDashboard,"onUpdate:modelValue":l[20]||(l[20]=r=>o.local.UrlDashboard=r),"error-messages":o.errors.UrlDashboard},null,8,["modelValue","error-messages"]),t(f,{label:"HTTPS key file",modelValue:o.local.settings.https.key,"onUpdate:modelValue":l[21]||(l[21]=r=>o.local.settings.https.key=r),"error-messages":o.errors.httpsKey},null,8,["modelValue","error-messages"]),t(f,{label:"HTTPS cert file",modelValue:o.local.settings.https.cert,"onUpdate:modelValue":l[22]||(l[22]=r=>o.local.settings.https.cert=r),"error-messages":o.errors.httpsCert},null,8,["modelValue","error-messages"])]),_:1})])}}},be=X(xe,[["__scopeId","data-v-2a659767"]]),Ue={class:"log-panel"},Re={class:"log-toolbar mb-2"},De={__name:"ProjectDialogLog",props:{projectLogText:{type:String,default:""},logFileName:{type:String,default:""},logError:{type:String,default:""}},emits:["refresh","log-scroll"],setup(o,{expose:C,emit:d}){const x=d,l=S(null);function v(){const j=l.value;j&&x("log-scroll",{scrollTop:j.scrollTop,scrollHeight:j.scrollHeight,clientHeight:j.clientHeight})}async function k(){await pe(),l.value&&(l.value.scrollTop=l.value.scrollHeight)}async function T(j){await pe(),l.value&&(l.value.scrollTop=j)}function f(){return l.value?l.value.scrollTop:0}return C({scrollToBottom:k,setScrollTop:T,getScrollTop:f}),(j,V)=>{const r=c("v-chip"),g=c("v-spacer"),i=c("v-btn"),A=c("v-alert");return y(),U("section",Ue,[O("div",Re,[t(r,{size:"small",color:"grey-lighten-2"},{default:a(()=>[u(P(o.logFileName?`File: ${o.logFileName}`:"File: -"),1)]),_:1}),t(g),t(i,{size:"small",variant:"outlined",onClick:V[0]||(V[0]=$=>x("refresh"))},{default:a(()=>[...V[1]||(V[1]=[u("Refresh",-1)])]),_:1})]),o.logError?(y(),D(A,{key:0,type:"error",density:"compact",class:"mb-2"},{default:a(()=>[u(P(o.logError),1)]),_:1})):R("",!0),O("pre",{ref_key:"logContentRef",ref:l,class:"log-content",onScroll:v},P(o.projectLogText||"Sem logs para este projeto."),545)])}}},Ne=X(De,[["__scopeId","data-v-29e4144f"]]),Ce={key:0,class:"panel-tabs-wrapper"},Ae={key:1},Be={__name:"ProjectDialog",props:{modelValue:Boolean,project:Object,title:String,submitLabel:String,readonlyName:Boolean,submitType:String},emits:["update:modelValue","save"],setup(o,{emit:C}){const d=o,x=C,l=S(d.modelValue),v=S("settings"),k=S(null),T=S(""),f=S(""),j=S(""),V=S(!0),r=S(0),g=ve({name:[],uiPort:[],httpAdminRoot:[],httpNodeRoot:[],flowFile:[],StaticFolder:[],adminTitle:[],UrlAdmin:[],UrlDashboard:[],httpsKey:[],httpsCert:[],user:[],password:[]}),i=ve({id:null,name:"",uiPort:null,autoStart:!1,UrlAdmin:"",UrlDashboard:"",adminAuth:!1,projectsStatus:null,settings:{flowFile:"",httpAdminRoot:"",httpNodeRoot:"",uiPort:null,ui:{path:"/"},editorTheme:{page:{title:""},projects:{enabled:!1},tours:!0},userDir:"",StaticPatch:"",functionGlobalContext:{},adminAuth:{type:"credentials",users:[{username:"",password:"",permissions:"*"}]},StaticFolder:"",https:{enabled:!1,key:"",cert:""},telemetry:{enabled:!1,updateNotification:!1}}});let A=null,$=null;ye(()=>{z(),B()}),H(()=>d.modelValue,n=>l.value=n),H(()=>l.value,n=>x("update:modelValue",n)),H(()=>d.project,n=>{n&&(Object.assign(i,JSON.parse(JSON.stringify(n))),v.value="settings",T.value="",f.value="",j.value="",V.value=!0)},{immediate:!0}),H(()=>l.value,n=>{n&&d.submitType==="update"?(le(),v.value==="log"&&(I(),b())):(z(),B())},{immediate:!0}),H(()=>v.value,n=>{n==="log"&&l.value&&d.submitType==="update"?(V.value||J(),I(),b()):(se(),B())}),H(()=>i,()=>{i.settings.adminAuth==null&&(i.settings.adminAuth={type:"credentials",users:[{username:"",password:"",permissions:"*"}]})},{deep:!0});async function Z(){Object.keys(g).forEach(Y=>g[Y]=[]);let n=!0;const s=/^(https?:\/\/)[^\s/$.?#].[^\s]*$/i,N=/^[\w\-. ]+$/i,W=/^\/.*$/;return d.submitType==="new"&&(await window.api.get("/checkSettings")).projects.some(ne=>ne.name===i.name)&&(g.name.push("O nome ja existe"),n=!1),i.name.trim()||(g.name.push("O nome nao pode estar vazio."),n=!1),(!i.uiPort||i.uiPort<=0)&&(g.uiPort.push("Porta invalida."),n=!1),s.test(i.UrlAdmin)||(g.UrlAdmin.push("URL Admin invalida."),n=!1),s.test(i.UrlDashboard)||(g.UrlDashboard.push("URL Dashboard invalida."),n=!1),W.test(i.settings.httpAdminRoot)||(g.httpAdminRoot.push("Deve iniciar com '/'."),n=!1),W.test(i.settings.httpNodeRoot)||(g.httpNodeRoot.push("Deve iniciar com '/'."),n=!1),N.test(i.settings.flowFile)||(g.flowFile.push("Nome de arquivo invalido."),n=!1),N.test(i.settings.StaticFolder)||(g.StaticFolder.push("Nome de pasta invalido."),n=!1),i.settings.editorTheme.page.title.trim()||(g.adminTitle.push("Titulo nao pode estar vazio."),n=!1),i.settings.https.key&&!N.test(i.settings.https.key)&&(g.httpsKey.push("Nome de arquivo invalido."),n=!1),i.settings.https.cert&&!N.test(i.settings.https.cert)&&(g.httpsCert.push("Nome de arquivo invalido."),n=!1),n||ue.error("Existem erros no formulario. Verifique os campos."),n}function G(n){const s={action:n,id:i.id};window.api.post("/ctl_project_windows_openEditor",s)}const F=S(!1),L=S(null);function K(n){L.value=n,F.value=!0}function ee(){L.value&&(te(L.value),F.value=!1,L.value=null)}function te(){const n={id:i.id,name:i.name};window.api.delete("/ctl_project_deleteProject",n),e()}async function m(){if(!await Z())return;let s=null;if(d.submitType==="new"&&(s=await window.api.post("/ctl_project_addProject",ge(i))),d.submitType==="update"&&(s=await window.api.put("/ctl_project_updateProject",ge(i))),s.status===!1){ue.error("Erro ao salvar o projeto.");return}s.status===!0&&(ue.success("Projeto salvo com sucesso!"),l.value=!1)}function e(){B(),z(),v.value="settings",l.value=!1}function p(n){return n==null||Number.isNaN(n)?"-":`${(n/1024/1024).toFixed(1)} MB`}function w(n){return n==null||Number.isNaN(n)?"-":`${n.toFixed(1)}%`}function E(n){return n==null||Number.isNaN(n)?"-":`${(n/1024/1024).toFixed(1)} MB/s`}function M(n,s){return s?s.pid==null?{name:n,text:"starting",color:"light-green",pid:null,ramBytes:null,cpuPercent:null,diskReadBytesPerSec:null,diskWriteBytesPerSec:null}:{name:n,text:"running",color:"green",pid:s.pid,ramBytes:s.rssBytes??null,cpuPercent:s.cpuPercent??null,diskReadBytesPerSec:s.diskReadBytesPerSec??null,diskWriteBytesPerSec:s.diskWriteBytesPerSec??null}:{name:n,text:"stopped",color:"red",pid:null,ramBytes:null,cpuPercent:null,diskReadBytesPerSec:null,diskWriteBytesPerSec:null}}function le(){z(),A=setInterval(async()=>{if(!i.name)return;const s=(await window.api.get("/ctl_project_getStatus")).find(N=>N.name===i.name);i.projectsStatus=M(i.name,s)},1e3)}function z(){A&&(clearInterval(A),A=null)}async function I(){if(!i.id)return;const n=V.value,s=await window.api.post("/ctl_project_log_tail",{id:i.id,lines:150});if(s?.status===!0){T.value=s.text||"",f.value=s.file||"",j.value="",n?await oe():await J();return}T.value="",f.value="",j.value=s?.error||"Erro ao carregar logs."}async function oe(){k.value&&await k.value.scrollToBottom()}function ae(n){if(!n)return;r.value=n.scrollTop;const s=6,N=n.scrollHeight-n.scrollTop-n.clientHeight;V.value=N<=s}function se(){k.value&&(r.value=k.value.getScrollTop())}async function J(){k.value&&await k.value.setScrollTop(r.value)}function b(){B(),$=setInterval(()=>{I()},1500)}function B(){$&&(clearInterval($),$=null)}return(n,s)=>{const N=c("v-toolbar-title"),W=c("v-spacer"),Y=c("v-icon"),q=c("v-btn"),ne=c("v-toolbar"),de=c("v-tab"),je=c("v-tabs"),Q=c("v-chip"),Se=c("v-col"),ke=c("v-row"),re=c("v-card-text"),ce=c("v-card-actions"),me=c("v-card"),fe=c("v-dialog"),we=c("v-card-title");return y(),U(_,null,[t(fe,{"model-value":l.value,"onUpdate:modelValue":s[3]||(s[3]=h=>l.value=h),width:"980"},{default:a(()=>[t(me,{class:ie({"project-dialog-card--fixed":o.submitType==="update"})},{default:a(()=>[t(ne,{flat:""},{default:a(()=>[t(N,null,{default:a(()=>[u(P(o.title),1)]),_:1}),t(W),t(q,{icon:"",onClick:e},{default:a(()=>[t(Y,null,{default:a(()=>[...s[6]||(s[6]=[u("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),o.submitType==="update"?(y(),U("div",Ce,[t(je,{density:"compact",class:"ma-0 pa-0",modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=h=>v.value=h)},{default:a(()=>[t(de,{value:"settings"},{default:a(()=>[...s[7]||(s[7]=[u("SETTINGS",-1)])]),_:1}),t(de,{value:"log"},{default:a(()=>[...s[8]||(s[8]=[u("LOG",-1)])]),_:1})]),_:1},8,["modelValue"])])):R("",!0),o.submitType==="update"&&i.projectsStatus?(y(),D(re,{key:1,class:"pb-0"},{default:a(()=>[t(ke,{class:"mt-2"},{default:a(()=>[t(Se,{cols:"12",class:"d-flex align-center"},{default:a(()=>[t(Q,{small:"",class:"ma-0 mr-2","text-color":"white",color:i.projectsStatus.color},{default:a(()=>[i.projectsStatus.pid?(y(),U(_,{key:0},[u(P(i.projectsStatus.text)+" ("+P(i.projectsStatus.pid)+") ",1)],64)):(y(),U(_,{key:1},[u(P(i.projectsStatus.text),1)],64))]),_:1},8,["color"]),t(Q,{small:"",class:"ma-0 mr-2",color:"grey-lighten-2"},{default:a(()=>[u(" RAM: "+P(p(i.projectsStatus.ramBytes)),1)]),_:1}),t(Q,{small:"",class:"ma-0 mr-2",color:"grey-lighten-2"},{default:a(()=>[u(" CPU: "+P(w(i.projectsStatus.cpuPercent)),1)]),_:1}),t(Q,{small:"",class:"ma-0",color:"grey-lighten-2"},{default:a(()=>[u(" Disk: R "+P(E(i.projectsStatus.diskReadBytesPerSec))+" W "+P(E(i.projectsStatus.diskWriteBytesPerSec)),1)]),_:1})]),_:1})]),_:1})]),_:1})):R("",!0),t(re,{class:ie({"project-dialog-body--fixed":o.submitType==="update","project-dialog-body--log":o.submitType==="update"&&v.value==="log"})},{default:a(()=>[o.submitType==="update"?(y(),U("div",{key:0,class:ie({"project-dialog-panel-host":!0,"project-dialog-panel-host--log":v.value==="log"})},[v.value==="log"?(y(),D(Ne,{key:0,ref_key:"projectDialogLogRef",ref:k,class:"project-dialog-log-fill","project-log-text":T.value,"log-file-name":f.value,"log-error":j.value,onRefresh:I,onLogScroll:ae},null,8,["project-log-text","log-file-name","log-error"])):(y(),D(be,{key:1,local:i,errors:g,"submit-type":o.submitType,"submit-label":o.submitLabel,onOpenAction:G,onConfirmDelete:s[1]||(s[1]=h=>K(i))},null,8,["local","errors","submit-type","submit-label"]))],2)):(y(),U("div",Ae,[t(be,{local:i,errors:g,"submit-type":o.submitType,"submit-label":o.submitLabel,onOpenAction:G,onConfirmDelete:s[2]||(s[2]=h=>K(i))},null,8,["local","errors","submit-type","submit-label"])]))]),_:1},8,["class"]),t(ce,{class:"project-dialog-actions"},{default:a(()=>[t(W),t(q,{variant:"text",color:"grey",onClick:e},{default:a(()=>[...s[9]||(s[9]=[u("Cancel",-1)])]),_:1}),t(q,{color:"success",onClick:m},{default:a(()=>[u(P(o.submitLabel),1)]),_:1})]),_:1})]),_:1},8,["class"])]),_:1},8,["model-value"]),t(fe,{modelValue:F.value,"onUpdate:modelValue":s[5]||(s[5]=h=>F.value=h),"max-width":"420"},{default:a(()=>[t(me,null,{default:a(()=>[t(we,{class:"text-h6"},{default:a(()=>[...s[10]||(s[10]=[u(" Confirmar exclusao ",-1)])]),_:1}),t(re,null,{default:a(()=>[s[11]||(s[11]=u(" Tem certeza que deseja deletar o projeto ",-1)),O("strong",null,P(L.value?.name),1),s[12]||(s[12]=u("? ",-1))]),_:1}),t(ce,null,{default:a(()=>[t(W),t(q,{color:"grey",onClick:s[4]||(s[4]=h=>F.value=!1)},{default:a(()=>[...s[13]||(s[13]=[u(" Cancelar ",-1)])]),_:1}),t(q,{color:"red",onClick:ee},{default:a(()=>[...s[14]||(s[14]=[u(" Deletar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},he=X(Be,[["__scopeId","data-v-d2cad8c4"]]),$e={class:"table-actions"},Fe={class:"table-wrapper"},Le={class:"actions-row"},Ee={__name:"ProjectTable",setup(o){const C=[{title:"",key:"select",sortable:!1},{title:"Name",key:"name"},{title:"Port",key:"port"}];var d=S([]);const x=S([]);Pe(async()=>{T(),setInterval(()=>{T()},1e3)}),ye(()=>{});const l=S(!1),v=S(null);function k(){v.value&&(ee(v.value),l.value=!1,v.value=null)}async function T(){const m=await window.api.get("/checkSettings");let e=await window.api.get("/ctl_project_getStatus");for(let p=0;p<m.projects.length;p++){let w=m.projects[p];const E=e.find(M=>M.name===w.name);m.projects[p].projectsStatus=$(w.name,E)}d.value=m.projects}const f=S(!1),j=S(null),V=S("Update project"),r=S("Update"),g=S("update");function i(m){j.value={...m},V.value="Update project",r.value="Update",g.value="update",f.value=!0}function A(){let m=d.value.length,e=1880+m;j.value={id:null,name:`Project${m}`,uiPort:e,autoStart:!1,UrlAdmin:`http://localhost:${e}/red/admin`,UrlDashboard:`http://localhost:${e}/red/admin`,adminAuth:!1,settings:{flowFile:"flow.json",httpAdminRoot:"/red/admin",httpNodeRoot:"/",uiPort:e,ui:{path:"/"},editorTheme:{page:{title:`Project${m}`},projects:{enabled:!1},tours:!0},userDir:"",StaticPatch:"",functionGlobalContext:{},adminAuth:{type:"credentials",users:[{username:"",password:"",permissions:"*"}]},StaticFolder:"static",https:{enabled:!1,key:"",cert:""},telemetry:{enabled:!1,updateNotification:!1}}},V.value="New project",r.value="Save",g.value="new",f.value=!0}function $(m,e){return e?e.pid==null?{name:m,text:"starting",color:"light-green",pid:null,ramBytes:null,cpuPercent:null,diskReadBytesPerSec:null,diskWriteBytesPerSec:null}:{name:m,text:"running",color:"green",pid:e.pid,ramBytes:e.rssBytes??null,cpuPercent:e.cpuPercent??null,diskReadBytesPerSec:e.diskReadBytesPerSec??null,diskWriteBytesPerSec:e.diskWriteBytesPerSec??null}:{name:m,text:"stopped",color:"red",pid:null,ramBytes:null,cpuPercent:null,diskReadBytesPerSec:null,diskWriteBytesPerSec:null}}function Z(m){if(m.id==null){const e=d.value.reduce((p,w)=>Math.max(p,w.id??0),0);m.id=e+1,d.value.push({...m})}else{const e=d.value.findIndex(p=>p.id===m.id);e!==-1&&(d.value[e]={...d.value[e],...m})}f.value=!1}function G(){d.value.filter(e=>x.value.includes(e.id)).forEach(e=>{L(e)})}function F(){d.value.filter(e=>x.value.includes(e.id)).forEach(e=>{K(e)})}function L(m){const e=d.value.findIndex(w=>w.id===m.id),p={id:d.value[e].id,name:d.value[e].name};window.api.post("/ctl_project_startWoker",p)}function K(m){const e=d.value.findIndex(w=>w.id===m.id),p={id:d.value[e].id,name:d.value[e].name};window.api.post("/ctl_project_stopWoker",p)}function ee(m){const e=d.value.findIndex(w=>w.id===m.id),p={id:d.value[e].id,name:d.value[e].name};window.api.delete("/ctl_project_deleteProject",p)}function te(m){m?x.value=d.value.map(e=>e.id):x.value=[]}return(m,e)=>{const p=c("v-icon"),w=c("v-btn"),E=c("v-checkbox"),M=c("v-chip"),le=c("v-data-table"),z=c("v-spacer"),I=c("v-card"),oe=c("v-card-title"),ae=c("v-card-text"),se=c("v-card-actions"),J=c("v-dialog");return y(),U(_,null,[t(I,{class:"pa-4"},{default:a(()=>[O("div",$e,[t(w,{small:"",class:"btn-small mx-1",color:"green",onClick:e[0]||(e[0]=b=>G())},{default:a(()=>[t(p,{left:""},{default:a(()=>[...e[6]||(e[6]=[u("mdi-play",-1)])]),_:1}),e[7]||(e[7]=u(" start ",-1))]),_:1}),t(w,{small:"",class:"btn-small mx-1",color:"red",onClick:e[1]||(e[1]=b=>F())},{default:a(()=>[t(p,{left:""},{default:a(()=>[...e[8]||(e[8]=[u("mdi-stop",-1)])]),_:1}),e[9]||(e[9]=u(" stop ",-1))]),_:1})]),O("div",Fe,[t(le,{items:Ve(d),headers:C,class:"elevation-1 fixed-table","item-key":"id","hide-default-footer":""},{"header.select":a(()=>[t(E,{"model-value":m.allSelected,indeterminate:m.isIndeterminate,"onUpdate:modelValue":te,"hide-details":""},null,8,["model-value","indeterminate"])]),"item.select":a(({item:b})=>[t(E,{modelValue:x.value,"onUpdate:modelValue":e[2]||(e[2]=B=>x.value=B),value:b.id,"hide-details":""},null,8,["modelValue","value"])]),"item.name":a(({item:b})=>[t(M,{small:"",class:"ma-0 name-chip","text-color":"white",color:b.projectsStatus.color,onClick:B=>i(b)},{default:a(()=>[u(P(b.name)+" ",1),b.adminAuth?(y(),D(p,{key:0,size:"16",class:"ml-2 name-icon",title:"Security enabled"},{default:a(()=>[...e[10]||(e[10]=[u("mdi-shield-lock",-1)])]),_:1})):R("",!0),b.autoStart?(y(),D(p,{key:1,size:"16",class:"ml-1 name-icon",title:"Auto start"},{default:a(()=>[...e[11]||(e[11]=[u("mdi-play",-1)])]),_:1})):R("",!0),b.settings?.https?.enabled?(y(),D(p,{key:2,size:"16",class:"ml-1 name-icon",title:"HTTPS enabled"},{default:a(()=>[...e[12]||(e[12]=[u("mdi-lock",-1)])]),_:1})):R("",!0),b.settings?.editorTheme?.projects?.enabled?(y(),D(p,{key:3,size:"16",class:"ml-1 name-icon",title:"Projects enabled"},{default:a(()=>[...e[13]||(e[13]=[u("mdi-git",-1)])]),_:1})):R("",!0),b.settings?.telemetry?.enabled?(y(),D(p,{key:4,size:"16",class:"ml-1 name-icon",title:"Telemetry enabled"},{default:a(()=>[...e[14]||(e[14]=[u("mdi-chart-line",-1)])]),_:1})):R("",!0)]),_:2},1032,["color","onClick"])]),"item.port":a(({item:b})=>[u(P(b.uiPort),1)]),_:1},8,["items"])]),O("div",Le,[t(z),t(w,{color:"grey",class:"mt-3",onClick:A},{default:a(()=>[t(p,{left:""},{default:a(()=>[...e[15]||(e[15]=[u("mdi-plus",-1)])]),_:1}),e[16]||(e[16]=u(" New Project ",-1))]),_:1})])]),_:1}),t(he,{"model-value":f.value,"onUpdate:modelValue":e[3]||(e[3]=b=>f.value=b),project:j.value,title:V.value,submitLabel:r.value,readonlyName:!1,submitType:g.value,onSave:Z},null,8,["model-value","project","title","submitLabel","submitType"]),t(J,{modelValue:l.value,"onUpdate:modelValue":e[5]||(e[5]=b=>l.value=b),"max-width":"420"},{default:a(()=>[t(I,null,{default:a(()=>[t(oe,{class:"text-h6"},{default:a(()=>[...e[17]||(e[17]=[u(" Confirmar exclusÃ£o ",-1)])]),_:1}),t(ae,null,{default:a(()=>[e[18]||(e[18]=u(" Tem certeza que deseja deletar o projeto ",-1)),O("strong",null,P(v.value?.name),1),e[19]||(e[19]=u("? ",-1))]),_:1}),t(se,null,{default:a(()=>[t(z),t(w,{color:"grey",onClick:e[4]||(e[4]=b=>l.value=!1)},{default:a(()=>[...e[20]||(e[20]=[u(" Cancelar ",-1)])]),_:1}),t(w,{color:"red",onClick:k},{default:a(()=>[...e[21]||(e[21]=[u(" Deletar ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},ze=X(Ee,[["__scopeId","data-v-efb87fd8"]]),We={__name:"Projects",setup(o){return(C,d)=>(y(),D(ze))}};export{We as default};
